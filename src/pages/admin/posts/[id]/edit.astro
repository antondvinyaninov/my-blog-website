---
import BaseLayout from '../../../../layouts/BaseLayout.astro';
import SubmissionForm from '../../../../components/SubmissionForm';
import { getPostsFromSupabase } from '../../../../utils/posts-supabase';
import { POSTS as FALLBACK_POSTS } from '../../../../data/posts';

export async function getStaticPaths() {
  let posts;
  try {
    posts = await getPostsFromSupabase();
    if (posts.length === 0) {
      posts = FALLBACK_POSTS;
    }
  } catch (error) {
    posts = FALLBACK_POSTS;
  }
  
  return posts.map(post => ({
    params: { id: post.id }
  }));
}
---

<BaseLayout title="Редактировать статью | Админ панель">
  <div class="container mx-auto px-4 lg:px-8 py-12">
    <SubmissionForm client:load />
  </div>
</BaseLayout>
